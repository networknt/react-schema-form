var u={},f={allTags:!0,closeAll:!0,list:!0,newJournal:!0,newTiddler:!0,permaview:!0,saveChanges:!0,search:!0,slider:!0,tabs:!0,tag:!0,tagging:!0,tags:!0,tiddler:!0,timeline:!0,today:!0,version:!0,option:!0,with:!0,filter:!0},c=/[\w_\-]/i,l=/^\-\-\-\-+$/,m=/^\/\*\*\*$/,k=/^\*\*\*\/$/,h=/^<<<$/,s=/^\/\/\{\{\{$/,d=/^\/\/\}\}\}$/,p=/^<!--\{\{\{-->$/,b=/^<!--\}\}\}-->$/,$=/^\{\{\{$/,v=/^\}\}\}$/,z=/.*?\}\}\}/;function a(t,e,n){return e.tokenize=n,n(t,e)}function i(t,e){var n=t.sol(),r=t.peek();if(e.block=!1,n&&/[<\/\*{}\-]/.test(r)){if(t.match($))return e.block=!0,a(t,e,o);if(t.match(h))return"quote";if(t.match(m)||t.match(k)||t.match(s)||t.match(d)||t.match(p)||t.match(b))return"comment";if(t.match(l))return"contentSeparator"}if(t.next(),n&&/[\/\*!#;:>|]/.test(r)){if(r=="!")return t.skipToEnd(),"header";if(r=="*")return t.eatWhile("*"),"comment";if(r=="#")return t.eatWhile("#"),"comment";if(r==";")return t.eatWhile(";"),"comment";if(r==":")return t.eatWhile(":"),"comment";if(r==">")return t.eatWhile(">"),"quote";if(r=="|")return"header"}if(r=="{"&&t.match("{{"))return a(t,e,o);if(/[hf]/i.test(r)&&/[ti]/i.test(t.peek())&&t.match(/\b(ttps?|tp|ile):\/\/[\-A-Z0-9+&@#\/%?=~_|$!:,.;]*[A-Z0-9+&@#\/%=~_|$]/i))return"link";if(r=='"')return"string";if(r=="~"||/[\[\]]/.test(r)&&t.match(r))return"brace";if(r=="@")return t.eatWhile(c),"link";if(/\d/.test(r))return t.eatWhile(/\d/),"number";if(r=="/"){if(t.eat("%"))return a(t,e,w);if(t.eat("/"))return a(t,e,W)}if(r=="_"&&t.eat("_"))return a(t,e,g);if(r=="-"&&t.eat("-")){if(t.peek()!=" ")return a(t,e,_);if(t.peek()==" ")return"brace"}return r=="'"&&t.eat("'")?a(t,e,x):r=="<"&&t.eat("<")?a(t,e,y):(t.eatWhile(/[\w\$_]/),u.propertyIsEnumerable(t.current())?"keyword":null)}function w(t,e){for(var n=!1,r;r=t.next();){if(r=="/"&&n){e.tokenize=i;break}n=r=="%"}return"comment"}function x(t,e){for(var n=!1,r;r=t.next();){if(r=="'"&&n){e.tokenize=i;break}n=r=="'"}return"strong"}function o(t,e){var n=e.block;return n&&t.current()?"comment":!n&&t.match(z)||n&&t.sol()&&t.match(v)?(e.tokenize=i,"comment"):(t.next(),"comment")}function W(t,e){for(var n=!1,r;r=t.next();){if(r=="/"&&n){e.tokenize=i;break}n=r=="/"}return"emphasis"}function g(t,e){for(var n=!1,r;r=t.next();){if(r=="_"&&n){e.tokenize=i;break}n=r=="_"}return"link"}function _(t,e){for(var n=!1,r;r=t.next();){if(r=="-"&&n){e.tokenize=i;break}n=r=="-"}return"deleted"}function y(t,e){if(t.current()=="<<")return"meta";var n=t.next();return n?n==">"&&t.peek()==">"?(t.next(),e.tokenize=i,"meta"):(t.eatWhile(/[\w\$_]/),f.propertyIsEnumerable(t.current())?"keyword":null):(e.tokenize=i,null)}const S={name:"tiddlywiki",startState:function(){return{tokenize:i}},token:function(t,e){if(t.eatSpace())return null;var n=e.tokenize(t,e);return n}};export{S as tiddlyWiki};
